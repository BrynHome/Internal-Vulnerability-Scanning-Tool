import logging
from core import driver
import socket

if __name__ == "__main__":
    while True:
        hostname = socket.gethostname()
        local_ip = socket.gethostbyname(hostname)
        subnet = local_ip.rsplit('.', 1)[0] + '.0/24'
        logging.basicConfig(level=logging.INFO)
        logging.info("Local Address: "+local_ip+"\n subnet set as default for network discover")
        print("Choose Starting Mode:\n1: Direct\n2: Remote\n")
        mode = input()
        code = driver.start(mode, subnet)
        if code == 1:
            exit(1)
        elif code == 0:
            logging.error("Improper Input.\nEnter 1 to control directly.\nEnter 2 to setup for remote control\n")
        else:
            logging.error(code)
            exit(-1)
