import logging
from IPython.display import clear_output
import core.Handler.receiver as recv


def main_loop_direct():
    while True:
        menu = main_menu()
        choice = input(menu)
        if cmd_parse(choice):
            break


def main_loop_remote(remote):
    remote.connect()
    while True:
        cmd = remote.recv_command()
        if not cmd_parse(cmd):
            break
    remote.disconnect()


def cmd_parse(command):
    if command == "4":
        return False
    else:
        return True


def start(mode):
    if mode == 1:
        main_loop_direct()
    elif mode == 2:
        remote = recv.Receiver("192.168.0.0")
        main_loop_remote(remote)


def main_menu():
    clear_output(wait=True)
    menu = ("Main Menu:\n1: Network Scan\n2: Vulnerability Scan"
            "\n3: Covert Mode\n4: Exit\n")
    return menu
